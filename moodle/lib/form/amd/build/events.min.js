define ("core_form/events",["exports","core/str","core/event_dispatcher","jquery","core/yui"],function(a,b,c,d,f){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.notifyUploadChanged=a.types=a.triggerUploadCompleted=a.triggerUploadStarted=a.notifyUploadCompleted=a.notifyUploadStarted=a.notifyFieldValidationFailure=a.notifyFormSubmittedByJavascript=a.notifyFormError=a.eventTypes=void 0;d=g(d);f=g(f);function g(a){return a&&a.__esModule?a:{default:a}}var h;(0,b.get_string)("changesmadereallygoaway","moodle").then(function(a){h=a;return a}).catch();var i=function(a){if(a){a.returnValue=h}},j={formError:"core_form/error",formSubmittedByJavascript:"core_form/submittedByJavascript",formFieldValidationFailed:"core_form/fieldValidationFailed",uploadStarted:"core_form/uploadStarted",uploadCompleted:"core_form/uploadCompleted",uploadChanged:"core_form/uploadChanged"};a.eventTypes=j;a.notifyFormError=function notifyFormError(a){return(0,c.dispatchEvent)(j.formError,{},a)};a.notifyFormSubmittedByJavascript=function notifyFormSubmittedByJavascript(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:!1,d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:!1;if(b){window.skipClientValidation=!0}var e=(0,c.dispatchEvent)(j.formSubmittedByJavascript,{skipValidation:b,fallbackHandled:d},a);if(b){window.skipClientValidation=!1}return e};a.notifyFieldValidationFailure=function notifyFieldValidationFailure(a,b){return(0,c.dispatchEvent)(j.formFieldValidationFailed,{message:b},a,{cancelable:!0})};var k=function(a){window.addEventListener("beforeunload",i);return(0,c.dispatchEvent)(j.uploadStarted,{},document.getElementById(a),{bubbles:!0,cancellable:!1})};a.notifyUploadStarted=k;var l=function(a){window.removeEventListener("beforeunload",i);return(0,c.dispatchEvent)(j.uploadCompleted,{},document.getElementById(a),{bubbles:!0,cancellable:!1})};a.notifyUploadCompleted=l;a.triggerUploadStarted=k;a.triggerUploadCompleted=l;a.types={uploadStarted:"core_form/uploadStarted",uploadCompleted:"core_form/uploadCompleted"};var m=!1;if(!m){f.default.use("event","moodle-core-event",function(){document.addEventListener(j.formError,function(a){var b=f.default.one(a.target),c=f.default.one(a.target.closest("form"));f.default.Global.fire(M.core.globalEvents.FORM_ERROR,{formid:c.generateID(),elementid:b.generateID()})});document.addEventListener(j.formSubmittedByJavascript,function(a){if(a.detail.fallbackHandled){return}if(a.skipValidation){window.skipClientValidation=!0}var b=f.default.one(a.target);b.fire(M.core.event.FORM_SUBMIT_AJAX,{currentTarget:b,fallbackHandled:!0});if(a.skipValidation){window.skipClientValidation=!1}})});document.addEventListener(j.formFieldValidationFailed,function(a){var b=d.default.Event("core_form-field-validation");(0,d.default)(a.target).trigger(b,a.detail.message)});m=!0}a.notifyUploadChanged=function notifyUploadChanged(a){return(0,c.dispatchEvent)(j.uploadChanged,{},document.getElementById(a),{bubbles:!0,cancellable:!1})}});
//# sourceMappingURL=events.min.js.map
